# venv activation
if [ -f "$PWD/.venv/bin/activate" ]; then
    source "$PWD/.venv/bin/activate"
fi

# Tell burn-tch to use PyTorch from Python
export LIBTORCH_USE_PYTORCH=1

# Make Rust find the libtorch shared libraries
export LD_LIBRARY_PATH="$PWD/.venv/lib/python3.13/site-packages/torch/lib:$LD_LIBRARY_PATH"

# Ensure CPU-only build
export TORCH_CUDA_VERSION=cpu

# Native CPU optimizations
export RUSTFLAGS="-C target-cpu=native"
